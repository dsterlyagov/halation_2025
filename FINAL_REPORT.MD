### Отчет о взаимосвязях и паттернах

#### **Источник данных: Confluence (база знаний команды и смежников)**

**1. UFS (A)**  
   - Нагрузка: 4500 TPS  
   - Критичность: критическая  
   - Основные подсистемы: Потребительские кредиты, Образовательные кредиты, Рефинансирование  
   - Связь с системой **KM (B)**: 
      - Основной трафик идет через HTTP и Kafka  
      - Подсистема **«Потребительские кредиты»** передает заявки на скоринг в систему **KM (B): Оркестратор**.  
      - Подсистема **«Образовательные кредиты»** проверяет льготы через тот же интерфейс.  
      - Подсистема **«Рефинансирование»** асинхронно отправляет историю платежей в систему **KM (B): ПТН** через Kafka.  

---

**2. KM (B)**  
   - Нагрузка: 3800 TPS  
   - Критичность: критическая  
   - Основные подсистемы: Оркестратор, Кредитный потенциал, Антифрод, ПТН  
   - Входящий трафик от **UFS (A)**, составляет около 89%.  
   - Выходящий трафик на **ID System (C)**, занимает примерно 63%, использующий протокол gRPC.  
   - Важное взаимодействие: система **KM (B): Оркестратор** проверяет цифровой профиль клиента через **ID System (C): Валидация**.  
   
---

**3. ID System (C)**  
   - Нагрузка: 2900 TPS  
   - Критичность: высокая  
   - Основная нагрузка приходится на **Валидацию** — 1800 TPS. Это наиболее узкое место во всей цепочке.  
   - Важно отметить антифрод-поток: **UFS → KM.Aнтифрод → ID System.Биометрия**.  

---

#### Паттерны и выводы:
- **Критический путь:** `UFS.Потребительские кредиты → KM.Оркестратор → ID System.Валидация`. Этот путь требует особого внимания, поскольку является основным маршрутом обработки транзакций.  
- **Бутылочное горлышко:** находится в **ID System.Валидация** с нагрузкой 1800 TPS. Здесь возможна задержка операций при пиковых нагрузках.  
- **Протоколы использования:** HTTP используется для синхронных запросов, gRPC — для высоконагруженных внутренних коммуникаций, Kafka — для асинхронной передачи больших объемов данных.  

---

#### **Источник данных: Meta (архитектура сервиса)**

Связи между системами представлены упрощенно:
- **Система A зависит от Системы B.**  
- **Система B зависит от Системы C.**  
Эти зависимости дублируют паттерны взаимодействия между **UFS (A), KM (B)** и **ID System (C)**. Никаких новых связей здесь не обнаружено.

---

#### **Источник данных: Telegram (переписка команды)**

Сообщение в чате DevOps:
> *Система E временно использует ресурсы Системы F до миграции.*
Это указание не связано с основной структурой данных, представленной ранее. Оно относится скорее к временному состоянию, нежели к долгосрочным архитектурным связям.

---

### Итоговый отчет:

1. Основное техническое взаимодействие происходит между **UFS (A)**, **KM (B)** и **ID System (C)**.  
2. Наиболее узким местом является модуль **ID System.Валидация** с максимальной нагрузкой 1800 TPS.  
3. Протоколы используются следующим образом: HTTP для синхронизации, gRPC для высокоскоростных коммуникаций, Kafka для асинхронности.  
4. Между дополнительными системами (**E** и **F**) связь временного характера, пока длится миграция ресурсов.[/LLMCHAIN]
